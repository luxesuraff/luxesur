---
import Pixels from "../components/Pixels.astro";

const { title, breadcrumbs = null, faqs = null } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>{title}</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- GOOGLE TAG (GA4) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZMDPYFW90C"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-ZMDPYFW90C');
    </script>

    <!-- SITE-WIDE SCHEMA -->
    <script type="application/ld+json">
      {JSON.stringify({
        "@context": "https://schema.org",
        "@type": "WebSite",
        name: "Luxesur",
        url: "https://www.luxesur.com",
        description:
          "Luxesur is a consumer-facing informational and referral platform that helps users find assistance for emergency plumbing situations through independent third-party service providers.",
        publisher: {
          "@type": "Organization",
          name: "Luxesur",
          url: "https://www.luxesur.com",
        },
      })}
    </script>

    <!-- ORGANIZATION SCHEMA (NO PHONE DURING BAKE) -->
    <script type="application/ld+json">
      {JSON.stringify({
        "@context": "https://schema.org",
        "@type": "Organization",
        name: "Luxesur",
        url: "https://www.luxesur.com",
        description:
          "Luxesur operates as an informational and referral platform connecting users with independent emergency plumbing service providers.",
      })}
    </script>

    <!-- OPTIONAL FAQ SCHEMA -->
    {faqs && (
      <script
        type="application/ld+json"
        set:html={JSON.stringify({
          "@context": "https://schema.org",
          "@type": "FAQPage",
          mainEntity: faqs.map((f) => ({
            "@type": "Question",
            name: f.question,
            acceptedAnswer: {
              "@type": "Answer",
              text: f.answer,
            },
          })),
        })}
      />
    )}

    <!-- OPTIONAL BREADCRUMB SCHEMA -->
    {breadcrumbs && (
      <script
        type="application/ld+json"
        set:html={JSON.stringify({
          "@context": "https://schema.org",
          "@type": "BreadcrumbList",
          itemListElement: breadcrumbs.map((item, i) => ({
            "@type": "ListItem",
            position: i + 1,
            name: item.name,
            item: item.url,
          })),
        })}
      />
    )}

    <!-- PIXELS (OFF BY DEFAULT) -->
    <Pixels />

    <style>
      body {
        font-family: Arial, Helvetica, sans-serif;
        margin: 0;
        padding: 0;
        line-height: 1.6;
        color: #111;
      }

      main {
        max-width: 900px;
        margin: 40px auto;
        padding: 0 20px;
      }

      footer {
        margin-top: 80px;
        padding: 20px;
        font-size: 14px;
        border-top: 1px solid #eee;
        text-align: center;
      }

      a {
        color: #0b5ed7;
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }
    </style>
  </head>

  <body>
    <main>
      <slot />
    </main>

    <footer>
      <a href="/">Home</a> |
      <a href="/about">About</a> |
      <a href="/contact">Contact</a> |
      <a href="/disclosures">Disclosures</a> |
      <a href="/privacy">Privacy</a> |
      <a href="/terms">Terms</a>
    </footer>
  </body>
</html>